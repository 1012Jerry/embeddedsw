<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>
   xqspipsu_options.c File Reference
</title>
<link href="$DriverApiDocsCssPath" rel="stylesheet" type="text/css">
</head>
<h3 class="PageHeader">Xilinx Processor IP Library</h3>
<hl>Software Drivers</hl>
<hr class="whs1">
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>xqspipsu_options.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This file implements funcitons to configure the QSPIPSU component, specifically some optional settings, clock and flash related information.<p>
<pre>
 MODIFICATION HISTORY:</pre><p>
<pre> Ver   Who Date     Changes
 ----- --- -------- -----------------------------------------------
 1.0   hk  08/21/14 First release
       sk  03/13/15 Added IO mode support.</pre><p>
<pre> </pre>
<p>
<code>#include &quot;<a class="el" href="xqspipsu_8h.html">xqspipsu.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_options_map.html">OptionsMap</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xqspipsu__options_8c.html#7270573aac2e897d40123dcb0a181aac">XQSPIPSU_NUM_OPTIONS</a>&nbsp;&nbsp;&nbsp;(sizeof(OptionsTable) / sizeof(<a class="el" href="struct_options_map.html">OptionsMap</a>))</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xqspipsu__options_8c.html#489dc7a54f66696b3cc98b74ec3d0276">XQspiPsu_SetOptions</a> (<a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *InstancePtr, u32 Options)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xqspipsu__options_8c.html#e64c9da28908fe94db0c2890fcd97679">XQspiPsu_ClearOptions</a> (<a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *InstancePtr, u32 Options)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xqspipsu__options_8c.html#4a71a2847d3d2e11d9c69c29084e38df">XQspiPsu_GetOptions</a> (<a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *InstancePtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xqspipsu__options_8c.html#22b18488a0529eeaadc3b5966f18855d">XQspiPsu_SetClkPrescaler</a> (<a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *InstancePtr, u8 Prescaler)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xqspipsu__options_8c.html#28338ae42ed4f7d2685ab18de2d21128">XQspiPsu_SelectFlash</a> (<a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *InstancePtr, u8 FlashCS, u8 FlashBus)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xqspipsu__options_8c.html#9f08409af64f221800e065b4fd31cd75">XQspiPsu_SetReadMode</a> (<a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *InstancePtr, u32 Mode)</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="7270573aac2e897d40123dcb0a181aac"></a><!-- doxytag: member="xqspipsu_options.c::XQSPIPSU_NUM_OPTIONS" ref="7270573aac2e897d40123dcb0a181aac" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XQSPIPSU_NUM_OPTIONS&nbsp;&nbsp;&nbsp;(sizeof(OptionsTable) / sizeof(<a class="el" href="struct_options_map.html">OptionsMap</a>))          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="e64c9da28908fe94db0c2890fcd97679"></a><!-- doxytag: member="xqspipsu_options.c::XQspiPsu_ClearOptions" ref="e64c9da28908fe94db0c2890fcd97679" args="(XQspiPsu *InstancePtr, u32 Options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XQspiPsu_ClearOptions           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Options</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function resets the options for the QSPIPSU device driver.The options control how the device behaves relative to the QSPIPSU bus. The device must be idle rather than busy transferring data before setting these device options.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Options</em>&nbsp;</td><td>contains the specified options to be set. This is a bit mask where a 1 indicates the option should be turned OFF and a 0 indicates no action. One or more bit values may be contained in the mask. See the bit definitions named XQSPIPSU_*_OPTIONS in the file <a class="el" href="xqspipsu_8h.html">xqspipsu.h</a>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if options are successfully set.</li><li>XST_DEVICE_BUSY if the device is currently transferring data. The transfer must complete or be aborted before setting options.</li></ul>
</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>This function is not thread-safe. </dd></dl>

</div>
</div><p>
<a class="anchor" name="4a71a2847d3d2e11d9c69c29084e38df"></a><!-- doxytag: member="xqspipsu_options.c::XQspiPsu_GetOptions" ref="4a71a2847d3d2e11d9c69c29084e38df" args="(XQspiPsu *InstancePtr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">u32 XQspiPsu_GetOptions           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function gets the options for the QSPIPSU device. The options control how the device behaves relative to the QSPIPSU bus.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> instance.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd></dd></dl>
Options contains the specified options currently set. This is a bit value where a 1 means the option is on, and a 0 means the option is off. See the bit definitions named XQSPIPSU_*_OPTIONS in file <a class="el" href="xqspipsu_8h.html">xqspipsu.h</a>.<p>
<dl compact><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div><p>
<a class="anchor" name="28338ae42ed4f7d2685ab18de2d21128"></a><!-- doxytag: member="xqspipsu_options.c::XQspiPsu_SelectFlash" ref="28338ae42ed4f7d2685ab18de2d21128" args="(XQspiPsu *InstancePtr, u8 FlashCS, u8 FlashBus)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XQspiPsu_SelectFlash           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>FlashCS</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>FlashBus</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This funciton should be used to tell the QSPIPSU driver the HW flash configuration being used. This API should be called atleast once in the application. If desired, it can be called multiple times when switching between communicating to different flahs devices/using different configs.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FlashCS</em>&nbsp;</td><td>- Flash Chip Select. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>FlashBus</em>&nbsp;</td><td>- Flash Bus (Upper, Lower or Both).</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if successful.</li><li>XST_DEVICE_IS_STARTED if the device is already started. It must be stopped to re-initialize.</li></ul>
</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>If this funciton is not called atleast once in the application, the driver assumes there is a single flash connected to the lower bus and CS line. </dd></dl>

</div>
</div><p>
<a class="anchor" name="22b18488a0529eeaadc3b5966f18855d"></a><!-- doxytag: member="xqspipsu_options.c::XQspiPsu_SetClkPrescaler" ref="22b18488a0529eeaadc3b5966f18855d" args="(XQspiPsu *InstancePtr, u8 Prescaler)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XQspiPsu_SetClkPrescaler           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u8&nbsp;</td>
          <td class="paramname"> <em>Prescaler</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Configures the clock according to the prescaler passed.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Prescaler</em>&nbsp;</td><td>- clock prescaler to be set.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if successful.</li><li>XST_DEVICE_IS_STARTED if the device is already started. It must be stopped to re-initialize.</li></ul>
</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>None. </dd></dl>

</div>
</div><p>
<a class="anchor" name="489dc7a54f66696b3cc98b74ec3d0276"></a><!-- doxytag: member="xqspipsu_options.c::XQspiPsu_SetOptions" ref="489dc7a54f66696b3cc98b74ec3d0276" args="(XQspiPsu *InstancePtr, u32 Options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XQspiPsu_SetOptions           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Options</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function sets the options for the QSPIPSU device driver.The options control how the device behaves relative to the QSPIPSU bus. The device must be idle rather than busy transferring data before setting these device options.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Options</em>&nbsp;</td><td>contains the specified options to be set. This is a bit mask where a 1 indicates the option should be turned ON and a 0 indicates no action. One or more bit values may be contained in the mask. See the bit definitions named XQSPIPSU_*_OPTIONS in the file <a class="el" href="xqspipsu_8h.html">xqspipsu.h</a>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if options are successfully set.</li><li>XST_DEVICE_BUSY if the device is currently transferring data. The transfer must complete or be aborted before setting options.</li></ul>
</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>This function is not thread-safe. </dd></dl>

</div>
</div><p>
<a class="anchor" name="9f08409af64f221800e065b4fd31cd75"></a><!-- doxytag: member="xqspipsu_options.c::XQspiPsu_SetReadMode" ref="9f08409af64f221800e065b4fd31cd75" args="(XQspiPsu *InstancePtr, u32 Mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XQspiPsu_SetReadMode           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> *&nbsp;</td>
          <td class="paramname"> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32&nbsp;</td>
          <td class="paramname"> <em>Mode</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function sets the Read mode for the QSPIPSU device driver.The device must be idle rather than busy transferring data before setting Read mode options.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_qspi_psu.html">XQspiPsu</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>Mode</em>&nbsp;</td><td>contains the specified Mode to be set. See the bit definitions named XQSPIPSU_READMODE_* in the file <a class="el" href="xqspipsu_8h.html">xqspipsu.h</a>.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if options are successfully set.</li><li>XST_DEVICE_BUSY if the device is currently transferring data. The transfer must complete or be aborted before setting Mode.</li></ul>
</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>This function is not thread-safe. </dd></dl>

</div>
</div><p>
Copyright @ 1995-2014 Xilinx, Inc. All rights reserved.
