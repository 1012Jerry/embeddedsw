<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>
   xaxicdma_porting_guide.h File Reference
</title>
<link href="$DriverApiDocsCssPath" rel="stylesheet" type="text/css">
</head>
<h3 class="PageHeader">Xilinx Processor IP Library</h3>
<hl>Software Drivers</hl>
<hr class="whs1">
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>xaxicdma_porting_guide.h File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This is a guide on how to move from using the XPS Central DMA driver, dmacentral, to use xaxidma driver.<p>
<pre>
 MODIFICATION HISTORY:</pre><p>
<pre> Ver   Who  Date     Changes
 ----- ---- -------- -------------------------------------------------------
 1.00a jz   08/18/10 First release
 </pre><p>
<b>Overview</b><p>
The AXI Central DMA engine is to replace the XPS Central DMA engine using the AXI bus interface.<p>
The AXI Central DMA hardware is different from the XPS Central DMA engine. The APS Central DMA engine only supports simple mode transfer, where only one buffer transfer can be sumitted to the hardware each time.<p>
The AXI Central DMA engine, on the other hand, also supports scatter gather transfers, where each submission to the hardware can have multiple buffers. Each transfer buffer is defined by a buffer descriptor (BD).<p>
The AXI Central DMA engine can be configured at build time to be in simple mode only, which is similar to the XPS Central DMA. It can also be configured as hybrid mode, where scatter gather mode is also supported.<p>
<b>Simple Mode API Difference</b><p>
The difference from the driver API level is as the following:<p>
<ul>
<li>User defined interrupt handler is no longer directly connected to the interrupt controller. Instead, it is registered as a call back function when the submit the transfer:</li></ul>
<p>
<pre>
   XAxiCdma_SimpleTransfer(InstancePtr, TxAddr, RxAddr, Length, CallBackFn,
        CallBackRef);
 </pre><p>
Please refer to example_simple_intr.c to see how it is used.<p>
<ul>
<li>Transfer submission API is different:</li></ul>
<p>
Before: <pre>
   XDmaCentral_Transfer(...)
 </pre><p>
Now: <pre>
   XAxiCdma_SimpleTransfer(...)
 </pre><p>
Note that arguments list is also different. Please see example_simple_poll.c or example_simple_intr.c for how to submit simple transfers.<p>
<ul>
<li>Polling for transfer completion is different:</li></ul>
<p>
Before: <pre>
   do {
       RegValue = XDmaCentral_GetStatus(DmaInstance);
   }
   while ((RegValue &amp; XDMC_DMASR_BUSY_MASK) == XDMC_DMASR_BUSY_MASK);
 </pre><p>
Now:<p>
<pre>
   while (XAxiCdma_IsBusy(InstancePtr)) {
      ;
   }
 </pre> 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
Copyright @ 1995-2014 Xilinx, Inc. All rights reserved. 
