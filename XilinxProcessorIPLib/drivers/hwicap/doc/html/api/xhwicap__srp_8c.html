<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>
   xhwicap_srp.c File Reference
</title>
<link href="$DriverApiDocsCssPath" rel="stylesheet" type="text/css">
</head>
<h3 class="PageHeader">Xilinx Processor IP Library</h3>
<hl>Software Drivers</hl>
<hr class="whs1">
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>xhwicap_srp.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains the functions of the <a class="el" href="struct_x_hw_icap.html">XHwIcap</a> driver used to access the configuration memory of the Xilinx FPGAs through the ICAP port.<p>
These APIs provide methods for reading and writing data, frames, and partial bitstreams to the ICAP port. See xhwicap.h for a detailed description of the driver.<p>
<dl compact><dt><b>Note:</b></dt><dd></dd></dl>
Only Virtex4, Virtex5, Virtex6, Spartan6 and kintex 7 devices are supported.<p>
<pre>
 MODIFICATION HISTORY:</pre><p>
<pre> Ver   Who  Date     Changes
 ----- ---- -------- -------------------------------------------------------
 1.00a bjb  11/17/03 First release
 1.01a sv   03/03/07 V4 Updates.
 2.00a ecm  10/20/07 V5 Support
 4.00a hvm  11/30/09 Added support for V6 and updated with HAL phase 1
		      modifications
 5.00a hvm  2/25/10  Added support for S6
 5.00a hvm  5/21/10  Modified XHwIcap_GetConfigReg function for V4/V5/V6/S6
			command sequence. Added one extra NOP before the
			Type 1 read config register command and removed an
			extra NOP after the config register command.
 6.00a hvm  8/12/11  Added support for K7
 7.00a bss  03/14/12 ReadId API is added to desync after lock up during
			configuration CR 637538</pre><p>
<pre> 8.00a bss  06/20/12 Deleted ReadId API as per CR 656162
 </pre> 
<p>
<code>#include &lt;xil_types.h&gt;</code><br>
<code>#include &lt;xil_assert.h&gt;</code><br>
<code>#include &quot;xhwicap.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhwicap__srp_8c.html#a14eea334708ab9c13a905d2a43edddf">XHwIcap_CommandDesync</a> (<a class="el" href="struct_x_hw_icap.html">XHwIcap</a> *InstancePtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhwicap__srp_8c.html#bf60dca4bae6860b6aefa131be4e75f7">XHwIcap_CommandCapture</a> (<a class="el" href="struct_x_hw_icap.html">XHwIcap</a> *InstancePtr)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">u32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xhwicap__srp_8c.html#3e9eb76baf1327e49cc1a47dba0e45ef">XHwIcap_GetConfigReg</a> (<a class="el" href="struct_x_hw_icap.html">XHwIcap</a> *InstancePtr, u32 ConfigReg, u32 *RegData)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="bf60dca4bae6860b6aefa131be4e75f7"></a><!-- doxytag: member="xhwicap_srp.c::XHwIcap_CommandCapture" ref="bf60dca4bae6860b6aefa131be4e75f7" args="(XHwIcap *InstancePtr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int XHwIcap_CommandCapture           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_x_hw_icap.html">XHwIcap</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>InstancePtr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a CAPTURE command to the ICAP port. This command captures all of the flip flop states so they will be available during readback. One can use this command instead of enabling the CAPTURE block in the design.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_hw_icap.html">XHwIcap</a> instance.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>XST_SUCCESS or XST_FAILURE</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>None. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="a14eea334708ab9c13a905d2a43edddf"></a><!-- doxytag: member="xhwicap_srp.c::XHwIcap_CommandDesync" ref="a14eea334708ab9c13a905d2a43edddf" args="(XHwIcap *InstancePtr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int XHwIcap_CommandDesync           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_x_hw_icap.html">XHwIcap</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>InstancePtr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sends a DESYNC command to the ICAP port.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>- a pointer to the <a class="el" href="struct_x_hw_icap.html">XHwIcap</a> instance to be worked on</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>XST_SUCCESS else XST_FAILURE</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>None. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="3e9eb76baf1327e49cc1a47dba0e45ef"></a><!-- doxytag: member="xhwicap_srp.c::XHwIcap_GetConfigReg" ref="3e9eb76baf1327e49cc1a47dba0e45ef" args="(XHwIcap *InstancePtr, u32 ConfigReg, u32 *RegData)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">u32 XHwIcap_GetConfigReg           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_x_hw_icap.html">XHwIcap</a> *&nbsp;</td>
          <td class="mdname" nowrap> <em>InstancePtr</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u32&nbsp;</td>
          <td class="mdname" nowrap> <em>ConfigReg</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>u32 *&nbsp;</td>
          <td class="mdname" nowrap> <em>RegData</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function returns the value of the specified configuration register.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_hw_icap.html">XHwIcap</a> instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ConfigReg</em>&nbsp;</td><td>is a constant which represents the configuration register value to be returned. Constants specified in <a class="el" href="xhwicap__i_8h.html">xhwicap_i.h</a>. Examples: XHI_IDCODE, XHI_FLR. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>RegData</em>&nbsp;</td><td>is the value of the specified configuration register.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>XST_SUCCESS or XST_FAILURE</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd>This is a blocking call. </dd></dl>
    </td>
  </tr>
</table>
Copyright @ 1995-2014 Xilinx, Inc. All rights reserved. 
