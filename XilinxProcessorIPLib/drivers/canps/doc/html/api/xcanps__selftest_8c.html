<html>
<head>
   <meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>
   xcanps_selftest.c File Reference
</title>
<link href="$DriverApiDocsCssPath" rel="stylesheet" type="text/css">
</head>
<h3 class="PageHeader">Xilinx Processor IP Library</h3>
<hl>Software Drivers</hl>
<hr class="whs1">
<!-- Generated by Doxygen 1.4.5 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<h1>xcanps_selftest.c File Reference</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
This file contains a diagnostic self-test function for the <a class="el" href="struct_x_can_ps.html">XCanPs</a> driver.<p>
Read xcanps.h file for more information.<p>
<dl compact><dt><b>Note:</b></dt><dd>The Baud Rate Prescaler Register (BRPR) and Bit Timing Register(BTR) are setup such that CAN baud rate equals 40Kbps, given the CAN clock equal to 24MHz. These need to be changed based on the desired baudrate and CAN clock frequency.</dd></dl>
<pre>
 MODIFICATION HISTORY:</pre><p>
<pre> Ver   Who    Date	Changes
 ----- -----  -------- -----------------------------------------------
 1.00a xd/sv  01/12/10 First release
 </pre> 
<p>
<code>#include &quot;xstatus.h&quot;</code><br>
<code>#include &quot;xcanps.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="xcanps__selftest_8c.html#a3b698eb70439e65485650333dde19df">XCanPs_SelfTest</a> (<a class="el" href="struct_x_can_ps.html">XCanPs</a> *InstancePtr)</td></tr>

</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a3b698eb70439e65485650333dde19df"></a><!-- doxytag: member="xcanps_selftest.c::XCanPs_SelfTest" ref="a3b698eb70439e65485650333dde19df" args="(XCanPs *InstancePtr)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top">int XCanPs_SelfTest           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="struct_x_can_ps.html">XCanPs</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>InstancePtr</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function runs a self-test on the CAN driver/device. The test resets the device, sets up the Loop Back mode, sends a standard frame, receives the frame, verifies the contents, and resets the device again.<p>
Note that this is a destructive test in that resets of the device are performed. Refer the device specification for the device status after the reset operation.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>InstancePtr</em>&nbsp;</td><td>is a pointer to the <a class="el" href="struct_x_can_ps.html">XCanPs</a> instance.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd><ul>
<li>XST_SUCCESS if the self-test passed. i.e., the frame received via the internal loop back has the same contents as the frame sent.</li><li>XST_FAILURE Otherwise.</li></ul>
</dd></dl>
<dl compact><dt><b>Note:</b></dt><dd></dd></dl>
If the CAN device does not work properly, this function may enter an infinite loop and will never return to the caller. <br>
<br>
 If XST_FAILURE is returned, the device is not reset so that the caller could have a chance to check reason(s) causing the failure.     </td>
  </tr>
</table>
Copyright @ 1995-2014 Xilinx, Inc. All rights reserved. 
